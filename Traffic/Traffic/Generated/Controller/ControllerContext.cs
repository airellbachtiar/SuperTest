// ---------------------------------------------------------------------- 
// GENERATED FILE 
// All code in this file is generated by the SuperModels workbench 
// (version 5.0.0.1292). Any changes made to this file may lead to 
// incorrect behaviour and will be lost if the code is generated again. 
// Modify the model instead. 
// 
// Copyright : Sioux Technologies 
// Model     : Traffic.sms (Traffic) 
// Generator : C# state machine generator (Decomp1) 
// Source    : All state machines of Decomp1.Controller 
// ---------------------------------------------------------------------- 

// ReSharper disable IdentifierTypo
// ReSharper disable CheckNamespace
// ReSharper disable PartialTypeWithSinglePart
// ReSharper disable InconsistentNaming
// ReSharper disable RedundantUsingDirective
// ReSharper disable MemberCanBePrivate.Global
// ReSharper disable ClassWithVirtualMembersNeverInherited.Global
// ReSharper disable UseObjectOrCollectionInitializer
// ReSharper disable once ClassNeverInstantiated.Global

using System;
using InterfaceServices.Model;
using Traffic.Generated.Interfaces;
using HalFramework.Interfaces.Reference;
using HalFramework.Interfaces.Reference.Common;

namespace Traffic.Generated.Controller;

public partial class ControllerContext
{
    public Port<StartStop> I1 { get => GetProperty(ref _I1); set => _I1 = value; }
    public Port<NormallyClosedValveItf> CarGreen { get => GetProperty(ref _CarGreen); set => _CarGreen = value; }
    public Port<NormallyClosedValveItf> CarRed { get => GetProperty(ref _CarRed); set => _CarRed = value; }
    public Port<NormallyClosedValveItf> CarYellow { get => GetProperty(ref _CarYellow); set => _CarYellow = value; }
    public Port<NormallyClosedValveItf> PedGreen { get => GetProperty(ref _PedGreen); set => _PedGreen = value; }
    public Port<NormallyClosedValveItf> PedRed { get => GetProperty(ref _PedRed); set => _PedRed = value; }
    public Port<DigitalSensorItf> PedestrianRequest { get => GetProperty(ref _PedestrianRequest); set => _PedestrianRequest = value; }

    internal void __EFFECT_transition_it1_17()
    {
        /* Original Code
        PedRed.Open();
        CarRed.Open();
        */
        PedRed.Open();
        CarRed.Open();
    }

    internal void __EFFECT_transition_it2_11()
    {
        /* Original Code
        CarGreen.Close();
        PedRed.Close();
        */
        CarGreen.Close();
        PedRed.Close();
    }

    internal void __EFFECT_transition_it5_12()
    {
        /* Original Code
        CarYellow.Close();
        PedRed.Close();
        */
        CarYellow.Close();
        PedRed.Close();
    }

    internal void __EFFECT_transition_it6_13()
    {
        /* Original Code
        CarRed.Close();
        PedRed.Close();
        */
        CarRed.Close();
        PedRed.Close();
    }

    internal void __EFFECT_transition_it7_14()
    {
        /* Original Code
        CarRed.Close();
        */
        CarRed.Close();
    }

    internal void __EFFECT_transition_it8_15()
    {
        /* Original Code
        CarRed.Close();
        PedRed.Close();
        */
        CarRed.Close();
        PedRed.Close();
    }

    internal void CarMayDrive()
    {
        /* Original Code
        CarGreen.Open();
        CarRed.Close();
        
        */
        CarGreen.Open();
        CarRed.Close();
        
    }

    internal void CarShouldSlowDown()
    {
        /* Original Code
        CarYellow.Open();
        CarGreen.Close();
        
        */
        CarYellow.Open();
        CarGreen.Close();
        
    }

    internal void CarsShouldStop()
    {
        /* Original Code
        CarYellow.Close();
        CarRed.Open();
        */
        CarYellow.Close();
        CarRed.Open();
    }

    internal void __ENTRY_state_pedestrianGreenLight_7()
    {
        /* Original Code
        PedRed.Close();
        */
        PedRed.Close();
    }

    internal void __ENTRY_state_pedestrianRedLight_14()
    {
        /* Original Code
        PedRed.Open();
        */
        PedRed.Open();
    }

    internal void __ENTRY_state_greenOn_12()
    {
        /* Original Code
        PedGreen.Open();
        */
        PedGreen.Open();
    }

    internal void __EXIT_state_greenOn_12()
    {
        /* Original Code
        PedGreen.Close();
        */
        PedGreen.Close();
    }

    internal bool __GUARD_transition_t4_6(TimeSpan t)
    {
        //Original Code
        //PedestrianRequest.IsActive && t > CarGreenLightDuration
        return PedestrianRequest.Impl.IsActive && t > CarGreenLightDuration;
    }

    internal bool __GUARD_transition_t5_7(TimeSpan t)
    {
        return t > CarYellowLightDuration;
    }

    internal bool __GUARD_transition_t6_8(TimeSpan t)
    {
        return t > CarAndPedestrianStopDelay;
    }

    internal bool __GUARD_transition_t8_10(TimeSpan t)
    {
        return t > CarAndPedestrianStopDelay;
    }

    internal bool __GUARD_transition_t12_4(TimeSpan t)
    {
        return t > PedestrianGreenLightDuration;
    }

    internal bool __GUARD_transition_t10_0(TimeSpan t)
    {
        return t > BlinkingLightDelay;
    }

    internal bool __GUARD_transition_t11_1(TimeSpan t)
    {
        return t > BlinkingLightDelay;
    }

    #region internal

    private Port<StartStop>? _I1;
    private Port<NormallyClosedValveItf>? _CarGreen;
    private Port<NormallyClosedValveItf>? _CarRed;
    private Port<NormallyClosedValveItf>? _CarYellow;
    private Port<NormallyClosedValveItf>? _PedGreen;
    private Port<NormallyClosedValveItf>? _PedRed;
    private Port<DigitalSensorItf>? _PedestrianRequest;
    private T GetProperty<T>(ref T? value) => 
        value ?? throw new InvalidOperationException($"Component with context {GetType()} is not yet built");

    #endregion
}
